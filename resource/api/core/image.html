
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>core.image Module &#8212; scikit-beam 0.0.12.post8+g7aaf6ce documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.0.12.post8+g7aaf6ce',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="core.recip Module" href="recip.html" />
    <link rel="prev" title="models Module" href="fitting/xrf_model.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-skbeam.core.image">
<span id="core-image-module"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">core.image</span></code> Module<a class="headerlink" href="#module-skbeam.core.image" title="Permalink to this headline">¶</a></h1>
<p>This is the module for putting advanced/x-ray specific image
processing tools.  These should be interesting compositions of existing
tools, not just straight wrapping of np/scipy/scikit images.</p>
<dl class="function">
<dt id="skbeam.core.image.construct_circ_avg_image">
<code class="descclassname">skbeam.core.image.</code><code class="descname">construct_circ_avg_image</code><span class="sig-paren">(</span><em>radii</em>, <em>intensities</em>, <em>dims=None</em>, <em>center=None</em>, <em>pixel_size=(1</em>, <em>1)</em>, <em>left=0</em>, <em>right=0</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.image.construct_circ_avg_image" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Constructs a 2D image from circular averaged data</dt>
<dd>where radii are given in units of pixels.
Normally, data will be taken from circular_average and used to
re-interpolate into an image.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>radii</strong> : 1D array of floats</p>
<blockquote>
<div><p>the radii (must be in pixels)</p>
</div></blockquote>
<p><strong>intensities</strong> : 1D array of floats</p>
<blockquote>
<div><p>the intensities for the radii</p>
</div></blockquote>
<p><strong>dims</strong> : 2 tuple of floats, optional</p>
<blockquote>
<div><p>[dy, dx] (row, col)
dy, dx are the dimensions in row,col format If the dims are not set, it
will assume the dimensions to be (2*maxr+1) where maxr is the maximum
radius. Note in the case of rectangular pixels (pixel_size not 1:1)
that the <a href="#id1"><span class="problematic" id="id2">`</span></a>maxr’ value will be different in each dimension</p>
</div></blockquote>
<p><strong>center: 2 tuple of floats, optional</strong></p>
<blockquote>
<div><p>[y0, x0] (row, col)
y0, x0 is the center (in row,col format)
if not centered, assumes center is (dims[0]-1)/2., (dims[1]-1)/2.</p>
</div></blockquote>
<p><strong>pixel_size</strong> : tuple, optional</p>
<blockquote>
<div><p>The size of a pixel (in a real unit, like mm).
argument order should be (pixel_height, pixel_width)
default is (1, 1)</p>
</div></blockquote>
<p><strong>left</strong> : float, optional</p>
<blockquote>
<div><p>pixels smaller than the minimum radius are set to this value
(set to None for the value at the minimum radius)</p>
</div></blockquote>
<p><strong>right</strong> : float, optional</p>
<blockquote>
<div><p>pixels larger than the maximum radius are set to this value
(set to None for the value at the maximum radius)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>IMG</strong> : the interpolated circular averaged image</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">circular_average</span></code></dt>
<dd>compute circular average of an image Pixels smaller than the minimum radius are set to the value at that minimum radius. Pixels larger than the maximum radius are set to zero.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">bin_grid</span></code></dt>
<dd>Bin and integrate an image, given the radial array of pixels Useful for nonlinear spacing (Ewald curvature)</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<dl class="docutils">
<dt>Some pixels may not be filled if the dimensions chosen are too large.</dt>
<dd>Run this code again on a list of values equal to 1 to obtain a mask
(and set left=0 and right=0).</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.image.construct_rphi_avg_image">
<code class="descclassname">skbeam.core.image.</code><code class="descname">construct_rphi_avg_image</code><span class="sig-paren">(</span><em>radii</em>, <em>angles</em>, <em>image</em>, <em>mask=None</em>, <em>center=None</em>, <em>shape=None</em>, <em>pixel_size=(1</em>, <em>1)</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.image.construct_rphi_avg_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a 2D Cartesian (x,y) image from a polar coordinate image.</p>
<p>Assumes a 2D array of data. If data is missing, use mask.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>radii</strong> : 1d array of coordinates, ascending order.</p>
<blockquote>
<div><p>The radii values (in units of pixels)
These may be non-uniformly spaced.</p>
</div></blockquote>
<p><strong>angles</strong> : 1d array of coordinates, ascending order</p>
<blockquote>
<div><p>The angle values (in units of radians)
Domain <em>must</em> be monotonically increasing (or a subset) if
we plot the reconstructed image in a typical x-y plane,
where x are the columns of the image and y are the rows
(img[y,x]), then 0 degrees is the -x direction, and
ascending angle goes clockwise in this plane.
These may be non-uniformly spaced.
Note that if the domain interval exceeds 2*pi, values
outside this range are ignored for interpolation.
Ex : angles = [0, …, 6.25, 2*np.pi]</p>
<blockquote>
<div><p>The last point modulo 2*pi is 0 which is the same as first
point so it is ignored</p>
</div></blockquote>
</div></blockquote>
<p><strong>image</strong> : 2d array the image to interpolate from</p>
<blockquote>
<div><p>rows are radii, columns are angles, ex: img[radii, angles]</p>
</div></blockquote>
<p><strong>mask</strong> : 2d array, optional</p>
<blockquote>
<div><p>the masked data (0 masked, 1 not masked). Defaults to None,
which means assume all points are valid.</p>
</div></blockquote>
<p><strong>center</strong> : 2 tuple of floats, optional</p>
<p><strong>shape</strong> : the new image shape, in terms of pixel values</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_img</strong> : 2d np.ndarray</p>
<blockquote class="last">
<div><p>The reconstructed image. Masked regions are filled with np.nan</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.image.find_ring_center_acorr_1D">
<code class="descclassname">skbeam.core.image.</code><code class="descname">find_ring_center_acorr_1D</code><span class="sig-paren">(</span><em>input_image</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.image.find_ring_center_acorr_1D" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the pixel-resolution center of a set of concentric rings.</p>
<p>This function uses correlation between the image and it’s mirror
to find the approximate center of  a single set of concentric rings.
It is assumed that there is only one set of rings in the image.  For
this method to work well the image must have significant mirror-symmetry
in both dimensions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input_image</strong> : ndarray</p>
<blockquote>
<div><p>A single image.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>calibrated_center</strong> : tuple</p>
<blockquote class="last">
<div><p>Returns the index (row, col) of the pixel that rings
are centered on.  Accurate to pixel resolution.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Complete Reference (API)</a><ul>
  <li><a href="index.html">Core API</a><ul>
      <li>Previous: <a href="fitting/xrf_model.html" title="previous chapter"><code class="docutils literal"><span class="pre">models</span></code> Module</a></li>
      <li>Next: <a href="recip.html" title="next chapter"><code class="docutils literal"><span class="pre">core.recip</span></code> Module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/resource/api/core/image.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2015 Brookhaven National Lab.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../../../_sources/resource/api/core/image.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>